{% comment %}

This should be included or placed dynamical within <main>

{% endcomment %}


{% load static %}
{% load inflection_extras %}
{% load creedictionary_extras %}

{% spaceless %}
  <article class="definition" id="paradigm">
    <header class="definition__header">
      <h1 id="head" class="definition-title">
        <dfn class="definition__matched-head">
          <data id="data:head" value="{{ lemma.text }}">
            {% orth lemma.text %}
          </data>
        </dfn>&nbsp;<span class="wordclass">({{ lemma|presentational_pos }})</span>
      </h1>
    </header>

    <section class="definition__recordings definition__recordings--not-loaded">
      <p class="explainer">Select a name below to hear the word above said by different speakers.</p>
      <ul class="recordings-list" data-cy="recordings-list">
        <!-- dynamically inserted speaker lists go here -->
      </ul>
      <div class="speaker-link">
        <!-- dynamically generated speaker's bio link goes here -->
      </div>
    </section>

    <section class="definition__meanings">
      <ol class="meanings">
        {% for def in lemma.definitions.all %}
          <li class="meanings__meaning">{{ def.text }}
            {% for source in def.source_ids %}
              <cite class="cite-dict">{{ source }}</cite>
            {% endfor %}
          </li>
        {% endfor %}
      </ol>
    </section>

    {% if paradigm_tables %}{# TODO: split this up into its own file? #}
      <section class="definition__paradigm paradigm" data-cy="paradigm">
        {% for table in paradigm_tables %}
          <table class="paradigm__table">
            {% for row in table %}
              {% if row.is_title %}
                <th class="paradigm-title" colspan="{{ row.span }}">{{ row.title }}</th>
              {% else %}
                <tr class="paradigm-row">
                  {% for cell in row %}
                    {% if cell.is_label %}
                      <th scope="row" class="paradigm-label paradigm-label--row">
                        {{ cell }}
                      </th>
                    {% elif cell.is_heading %}
                      <th scope="col" class="paradigm-label paradigm-label--col">
                        {{ cell }}
                      </th>
                    {% elif cell == "" %}
                      <td class="paradigm-cell paradigm-cell--empty"></td>
                    {% else %}
                      <td class="paradigm-cell"> {% orth cell %}
                      </td>
                    {% endif %}
                  {% endfor %}
                </tr>
              {% endif %}
            {% endfor %}
          </table>
        {% endfor %}

        <button class="paradigm__size-toggle-button" data-cy="paradigm-toggle-button">
          <span class="paradigm__size-toggle-plus-minus">
            {% if paradigm_size.value == 'LINGUISTIC' %}- {% else %}+ {% endif %}
          </span>
          <span class="paradigm__size-toggle-button-text">
            show {% if paradigm_size.value == 'LINGUISTIC' %}less{% else %}more{% endif %}
          </span>
        </button>
      </section>
    {% endif %}
  </article>
{% endspaceless %}
